{"ast":null,"code":"import _slicedToArray from \"@babel/runtime-corejs2/helpers/esm/slicedToArray\";\nvar __jsx = React.createElement;\nimport React, { useState, useEffect, useContext } from 'react';\nimport { withTranslation, i18n } from './i18n';\nimport { Button, FormControl, Select, MenuItem, withStyles } from '@material-ui/core'; // import { checkAuth } from '../utils/auth'\n\nimport ModalConnexion from '../store/container/modalConnexion';\nimport { languages } from '../utils/lang';\nimport { useRouter } from 'next/router';\nimport LangBtn from './language';\nimport { useCookies } from 'react-cookie';\n/* Header style (need to move) */\n\nvar headerLayoutStyle = {\n  // backgroundColor: '#fb9e91',\n  // backgroundColor: '#90aeff',\n  background: 'linear-gradient(45deg, #2196f3 30%, #21cbf3 90%)',\n  boxShadow: '0 3px 5px 2px rgba(33, 203, 243, .30)',\n  width: '100%',\n  height: '60px',\n  display: 'flex',\n  justifyContent: 'space-between'\n};\nvar headerBtnStyle = {\n  borderLeft: \"1px solid rgba(0, 0, 0, 0.05)\",\n  margin: \"0px\",\n  borderRadius: 0,\n  height: '100%',\n  color: \"white\",\n  padding: '0px 40px',\n  // backgroundColor: '#87e5da'\n  background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)' // boxShadow: '0 3px 5px 2px rgba(255, 105, 135, .3)'\n\n};\nvar headerLogo = {\n  color: '#FFF',\n  width: 300,\n  height: '65px',\n  display: 'flex',\n  justifyContent: 'center',\n  alignItems: 'center',\n  fontSize: '2em',\n  textTransform: 'uppercase',\n  fontWeight: '600',\n  // fontStyle: 'italic',\n  textShadow: '2px 2px rgba(0, 0, 0, 0.2)'\n  /* Component */\n\n};\n\nvar HeaderLayout = function HeaderLayout(props) {\n  return __jsx(\"div\", {\n    style: headerLayoutStyle\n  }, props.children);\n};\n\nvar JobTribooLogo = function JobTribooLogo() {\n  var router = useRouter();\n  return __jsx(\"div\", {\n    style: headerLogo,\n    onClick: function onClick() {\n      return router.pathname !== '/' ? router.push('/') : null;\n    }\n  }, \"JobTriboo\");\n};\n\nvar HeaderOnline = function HeaderOnline(_ref) {\n  var t = _ref.t,\n      setLoginState = _ref.setLoginState;\n\n  var _useCookies = useCookies(),\n      _useCookies2 = _slicedToArray(_useCookies, 3),\n      cookies = _useCookies2[0],\n      setCookies = _useCookies2[1],\n      removeCookies = _useCookies2[2];\n\n  var router = useRouter();\n\n  var handleLogout = function handleLogout() {\n    console.log('LOGOUT');\n    removeCookies('token');\n    setLoginState(false);\n  };\n\n  return __jsx(HeaderLayout, null, __jsx(\"div\", null, __jsx(JobTribooLogo, null)), __jsx(\"div\", null, __jsx(LangBtn, null), __jsx(Button, {\n    style: headerBtnStyle,\n    onClick: function onClick() {\n      return router.push('/dashboard');\n    }\n  }, t('dashboard')), __jsx(Button, {\n    style: headerBtnStyle\n  }, t('settings')), __jsx(Button, {\n    style: headerBtnStyle,\n    onClick: handleLogout\n  }, t('logout'))));\n};\n\nvar HeaderOffline = function HeaderOffline(_ref2) {\n  var t = _ref2.t;\n\n  var _useState = useState(false),\n      modalOpen = _useState[0],\n      setModalOpenState = _useState[1];\n\n  var _useState2 = useState(false),\n      modalWindowLogin = _useState2[0],\n      setMWindowLogin = _useState2[1];\n\n  var openModalMechanism = function openModalMechanism(modalWindowState) {\n    setModalOpenState(true);\n    setMWindowLogin(modalWindowState);\n  };\n\n  return __jsx(HeaderLayout, null, __jsx(\"div\", null, __jsx(JobTribooLogo, null)), __jsx(\"div\", null, __jsx(LangBtn, null), __jsx(Button, {\n    style: headerBtnStyle,\n    onClick: function onClick() {\n      return openModalMechanism(true);\n    }\n  }, t('login')), __jsx(Button, {\n    style: headerBtnStyle,\n    onClick: function onClick() {\n      return openModalMechanism(false);\n    }\n  }, t('register'))), __jsx(ModalConnexion, {\n    setModalOpenState: setModalOpenState,\n    setMWindowLogin: setMWindowLogin,\n    modalWindowLogin: modalWindowLogin,\n    modalOpen: modalOpen\n  }));\n};\n\nvar Header = function Header(_ref3) {\n  var isLoggedIn = _ref3.isLoggedIn,\n      t = _ref3.t,\n      setLoginState = _ref3.setLoginState,\n      loginState = _ref3.loginState;\n\n  var _useCookies3 = useCookies(),\n      _useCookies4 = _slicedToArray(_useCookies3, 1),\n      cookies = _useCookies4[0];\n\n  var router = useRouter();\n  useEffect(function () {\n    if (isLoggedIn !== undefined && cookies.token === undefined) {\n      setLoginState(false);\n      if (router.pathname === '/settings') router.push('/');\n    } else if (isLoggedIn !== undefined && !loginState) {\n      setLoginState(isLoggedIn);\n      if (!isLoggedIn && router.pathname === '/settings') router.push('/');\n    }\n\n    console.log(isLoggedIn, loginState);\n  });\n  return loginState ? __jsx(HeaderOnline, {\n    t: t,\n    setLoginState: setLoginState\n  }) : __jsx(HeaderOffline, {\n    t: t\n  });\n};\n\nexport default withTranslation('common')(Header);","map":{"version":3,"sources":["/Users/hugopapier/Documents/jobTriboo/app/components/header.js"],"names":["React","useState","useEffect","useContext","withTranslation","i18n","Button","FormControl","Select","MenuItem","withStyles","ModalConnexion","languages","useRouter","LangBtn","useCookies","headerLayoutStyle","background","boxShadow","width","height","display","justifyContent","headerBtnStyle","borderLeft","margin","borderRadius","color","padding","headerLogo","alignItems","fontSize","textTransform","fontWeight","textShadow","HeaderLayout","props","children","JobTribooLogo","router","pathname","push","HeaderOnline","t","setLoginState","cookies","setCookies","removeCookies","handleLogout","console","log","HeaderOffline","modalOpen","setModalOpenState","modalWindowLogin","setMWindowLogin","openModalMechanism","modalWindowState","Header","isLoggedIn","loginState","undefined","token"],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useContext } from 'react'\nimport { withTranslation, i18n } from './i18n'\n\nimport { Button, FormControl, Select, MenuItem, withStyles } from '@material-ui/core'\n\n// import { checkAuth } from '../utils/auth'\nimport ModalConnexion from '../store/container/modalConnexion'\nimport { languages } from '../utils/lang'\nimport { useRouter } from 'next/router'\n\nimport LangBtn from './language'\nimport { useCookies } from 'react-cookie'\n\n\n/* Header style (need to move) */\nconst headerLayoutStyle = {\n  // backgroundColor: '#fb9e91',\n  // backgroundColor: '#90aeff',\n  background: 'linear-gradient(45deg, #2196f3 30%, #21cbf3 90%)',\n  boxShadow: '0 3px 5px 2px rgba(33, 203, 243, .30)',\n  width: '100%',\n  height: '60px',\n  display: 'flex',\n  justifyContent: 'space-between'\n}\n\nconst headerBtnStyle = {\n  borderLeft: \"1px solid rgba(0, 0, 0, 0.05)\",\n  margin: \"0px\",\n  borderRadius: 0,\n  height: '100%',\n  color: \"white\",\n  padding: '0px 40px',\n  // backgroundColor: '#87e5da'\n  background: 'linear-gradient(45deg, #FE6B8B 30%, #FF8E53 90%)',\n  // boxShadow: '0 3px 5px 2px rgba(255, 105, 135, .3)'\n}\n\nconst headerLogo = {\n  color: '#FFF',\n  width: 300,\n  height: '65px',\n  display: 'flex',\n  justifyContent: 'center',\n  alignItems: 'center',\n  fontSize: '2em',\n  textTransform: 'uppercase',\n  fontWeight: '600',\n  // fontStyle: 'italic',\n  textShadow: '2px 2px rgba(0, 0, 0, 0.2)'\n}\n\n/* Component */\nconst HeaderLayout = props => (\n  <div style={headerLayoutStyle}>\n    {props.children}\n  </div>\n);\n\nconst JobTribooLogo = () => {\n  const router = useRouter();\n\n  return (\n    <div\n      style={headerLogo}\n      onClick={() => router.pathname !== '/' ? router.push('/') : null}\n    >\n      JobTriboo\n    </div>\n  );\n}\n\nconst HeaderOnline = ({ t, setLoginState }) => {\n  const [cookies, setCookies, removeCookies] = useCookies();\n  const router = useRouter();\n\n  const handleLogout = () => {\n    console.log('LOGOUT')\n    removeCookies('token');\n    setLoginState(false);\n  }\n\n  return (\n    <HeaderLayout>\n      <div>\n        <JobTribooLogo />\n      </div>\n\n      <div>\n        <LangBtn />\n        <Button style={headerBtnStyle} onClick={() => router.push('/dashboard')}>{t('dashboard')}</Button>\n        <Button style={headerBtnStyle}>{t('settings')}</Button>\n        <Button style={headerBtnStyle} onClick={handleLogout}>{t('logout')}</Button>\n      </div>\n    </HeaderLayout>\n  );\n}\n\nconst HeaderOffline = ({ t }) => {\n  const [modalOpen, setModalOpenState] = useState(false);\n  const [modalWindowLogin, setMWindowLogin] = useState(false);\n\n  const openModalMechanism = (modalWindowState) => {\n    setModalOpenState(true);\n    setMWindowLogin(modalWindowState);\n  }\n\n  return (\n    <HeaderLayout>\n      <div>\n        <JobTribooLogo />\n      </div>\n\n      <div>\n        <LangBtn />\n        <Button\n          style={headerBtnStyle}\n          onClick={() => openModalMechanism(true)}\n        >\n          {t('login')}\n        </Button>\n        <Button\n          style={headerBtnStyle}\n          onClick={() => openModalMechanism(false)}\n        >\n          {t('register')}\n        </Button>\n      </div>\n\n      <ModalConnexion\n        setModalOpenState={setModalOpenState}\n        setMWindowLogin={setMWindowLogin}\n        modalWindowLogin={modalWindowLogin}\n        modalOpen={modalOpen}\n      />\n    </HeaderLayout>\n  )\n};\n\nconst Header = ({ isLoggedIn, t, setLoginState, loginState }) => {\n  const [cookies] = useCookies();\n  const router = useRouter();\n\n  useEffect(() => {\n\n    if (isLoggedIn !== undefined && cookies.token === undefined) {\n      setLoginState(false);\n      if (router.pathname === '/settings')\n        router.push('/');\n    }\n    else if (isLoggedIn !== undefined && !loginState) {\n      setLoginState(isLoggedIn);\n      if (!isLoggedIn && router.pathname === '/settings')\n        router.push('/');\n    }\n\n    console.log(isLoggedIn, loginState)\n  });\n\n  return (loginState ? <HeaderOnline t={t} setLoginState={setLoginState} /> : <HeaderOffline t={t} />);\n}\n\nexport default withTranslation('common')(Header);"]},"metadata":{},"sourceType":"module"}