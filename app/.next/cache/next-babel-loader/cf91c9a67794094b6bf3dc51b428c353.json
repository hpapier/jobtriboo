{"ast":null,"code":"import fetch from 'isomorphic-unfetch';\nimport { Cookies } from 'react-cookie';\nconst cookie = new Cookies();\nconst serverUrl = \"http://localhost:3001\";\nexport const checkAuth = async ctx => {\n  let token = null; // Server Side\n\n  if (ctx.req) {\n    console.log('-> SERVER SIDE AUTH.');\n    const tk = ctx.req.headers.cookie.match(/(?:(?:^|.*;\\s*)token\\s*\\=\\s*([^;]*).*$)|^.*$/);\n    console.log('tk: ', tk);\n    if (tk === null) return false;\n    token = tk[1];\n  } // // Client Side \n  else {\n      console.log('-> CLIENT SIDE AUTH.');\n      token = cookie.get('token');\n      console.log('Token: ', token);\n      if (token === null) return false;\n    }\n\n  const res = await fetch(serverUrl + \"/api/auth\", {\n    method: \"GET\",\n    headers: {\n      \"Authorization\": token\n    }\n  });\n  if (res.status === 200) return true;\n  return false;\n};","map":{"version":3,"sources":["/Users/hugopapier/Documents/jobTriboo/app/utils/auth.js"],"names":["fetch","Cookies","cookie","serverUrl","checkAuth","ctx","token","req","console","log","tk","headers","match","get","res","method","status"],"mappings":"AAAA,OAAOA,KAAP,MAAkB,oBAAlB;AACA,SAASC,OAAT,QAAwB,cAAxB;AAEA,MAAMC,MAAM,GAAG,IAAID,OAAJ,EAAf;AACA,MAAME,SAAS,GAAG,uBAAlB;AAEA,OAAO,MAAMC,SAAS,GAAG,MAAMC,GAAN,IAAa;AACpC,MAAIC,KAAK,GAAG,IAAZ,CADoC,CAGpC;;AACA,MAAID,GAAG,CAACE,GAAR,EAAa;AACXC,IAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACA,UAAMC,EAAE,GAAGL,GAAG,CAACE,GAAJ,CAAQI,OAAR,CAAgBT,MAAhB,CAAuBU,KAAvB,CAA6B,8CAA7B,CAAX;AACAJ,IAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAoBC,EAApB;AAEA,QAAIA,EAAE,KAAK,IAAX,EACE,OAAO,KAAP;AAEFJ,IAAAA,KAAK,GAAGI,EAAE,CAAC,CAAD,CAAV;AACD,GATD,CAUA;AAVA,OAWK;AACHF,MAAAA,OAAO,CAACC,GAAR,CAAY,sBAAZ;AACAH,MAAAA,KAAK,GAAGJ,MAAM,CAACW,GAAP,CAAW,OAAX,CAAR;AACAL,MAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ,EAAuBH,KAAvB;AAEA,UAAIA,KAAK,KAAK,IAAd,EACE,OAAO,KAAP;AACH;;AAED,QAAMQ,GAAG,GAAG,MAAMd,KAAK,CAACG,SAAS,GAAG,WAAb,EAA0B;AAAEY,IAAAA,MAAM,EAAE,KAAV;AAAiBJ,IAAAA,OAAO,EAAE;AAAE,uBAAiBL;AAAnB;AAA1B,GAA1B,CAAvB;AACA,MAAIQ,GAAG,CAACE,MAAJ,KAAe,GAAnB,EACE,OAAO,IAAP;AAEF,SAAO,KAAP;AACD,CA7BM","sourcesContent":["import fetch from 'isomorphic-unfetch'\nimport { Cookies } from 'react-cookie'\n\nconst cookie = new Cookies();\nconst serverUrl = \"http://localhost:3001\";\n\nexport const checkAuth = async ctx => {\n  let token = null;\n\n  // Server Side\n  if (ctx.req) {\n    console.log('-> SERVER SIDE AUTH.')\n    const tk = ctx.req.headers.cookie.match(/(?:(?:^|.*;\\s*)token\\s*\\=\\s*([^;]*).*$)|^.*$/);\n    console.log('tk: ', tk);\n\n    if (tk === null)\n      return false;\n\n    token = tk[1];\n  }\n  // // Client Side \n  else {\n    console.log('-> CLIENT SIDE AUTH.')\n    token = cookie.get('token');\n    console.log('Token: ', token);\n\n    if (token === null)\n      return false;\n  }\n\n  const res = await fetch(serverUrl + \"/api/auth\", { method: \"GET\", headers: { \"Authorization\": token }});\n  if (res.status === 200)\n    return true;\n\n  return false;\n};"]},"metadata":{},"sourceType":"module"}